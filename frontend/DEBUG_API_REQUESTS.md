# APIリクエストのデバッグ方法

## 問題

「記事を生成」ボタンを押しても、Vercelのログに何も表示されない。

## 原因

`vercel.json`を確認すると、APIリクエストはHerokuのバックエンドにリダイレクトされています：

```json
"rewrites": [
  {
    "source": "/api/(.*)",
    "destination": "https://blog-automation-api-prod-1077654888a6.herokuapp.com/api/$1"
  }
]
```

そのため、**Vercelのログには表示されません**。ログは**Heroku**で確認する必要があります。

## デバッグ方法

### 方法1: ブラウザの開発者ツールで確認（推奨）

1. **開発者ツールを開く**
   - `F12` キーを押す
   - または、右クリック > 「検証」を選択

2. **Networkタブを開く**
   - 開発者ツールの「Network」タブをクリック

3. **「記事を生成」ボタンを押す**

4. **APIリクエストを確認**
   - `/api/articles` というリクエストを探す
   - リクエストをクリックして詳細を確認

5. **確認すべき項目**
   - **Status**: 200（成功）か、エラーコードか
   - **Request URL**: 正しいURLに送信されているか
   - **Request Headers**: Authorizationヘッダーが含まれているか
   - **Response**: レスポンスデータが返ってきているか

### 方法2: Herokuのログを確認

バックエンドがHerokuにデプロイされているため、Herokuのログを確認してください：

```bash
# Heroku CLIを使用
heroku logs --tail --app blog-automation-api-prod

# または、Herokuダッシュボードから
# https://dashboard.heroku.com/apps/blog-automation-api-prod/logs
```

### 方法3: コンソールでエラーを確認

1. **開発者ツールの「Console」タブを開く**

2. **エラーメッセージを確認**
   - 赤いエラーメッセージがないか確認
   - 特に、CORSエラーやネットワークエラーがないか確認

## 確認すべきポイント

### 1. APIリクエストが送信されているか

Networkタブで `/api/articles` というリクエストが表示されるか確認

### 2. リクエストのステータスコード

- **200**: 成功
- **401**: 認証エラー（トークンが無効）
- **404**: エンドポイントが見つからない
- **500**: サーバーエラー
- **CORSエラー**: クロスオリジンリクエストがブロックされている

### 3. レスポンスデータ

Responseタブで、サーバーからのレスポンスを確認

## よくある問題と解決方法

### 問題1: リクエストが送信されない

**原因**: フロントエンドのエラーでリクエストが送信されていない

**確認方法**:
- Consoleタブでエラーを確認
- Networkタブでリクエストが表示されない

**解決方法**:
- フロントエンドのエラーを修正

### 問題2: 401 Unauthorized

**原因**: 認証トークンが無効または期限切れ

**確認方法**:
- Networkタブで401エラーを確認
- Request HeadersでAuthorizationヘッダーを確認

**解決方法**:
- 再度ログインする
- トークンの有効期限を確認

### 問題3: CORSエラー

**原因**: バックエンドのCORS設定が不適切

**確認方法**:
- ConsoleタブでCORSエラーを確認
- Networkタブでリクエストが失敗している

**解決方法**:
- バックエンドのCORS設定を確認
- `CORS_ORIGINS`環境変数を確認

### 問題4: 500 Internal Server Error

**原因**: サーバー側のエラー

**確認方法**:
- Networkタブで500エラーを確認
- Herokuのログでエラーを確認

**解決方法**:
- Herokuのログを確認してエラーを特定
- サーバー側のコードを修正

## 次のステップ

1. **ブラウザの開発者ツールを開く**
   - `F12` キーを押す

2. **Networkタブを開く**

3. **「記事を生成」ボタンを押す**

4. **以下を確認**
   - `/api/articles` というリクエストが表示されるか
   - リクエストのステータスコード
   - レスポンスデータ

5. **結果を共有**
   - スクリーンショットまたは詳細を共有してください

